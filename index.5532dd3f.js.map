{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,uCAOMC,GAFsBC,SAASC,cAAc,eAEtCD,SAASC,cAAc,mBAE9BC,EAAc,IAAI,EAAAL,EAAAM,aAmCjB,SAASC,EAAOC,GACrB,OAAOA,EACJC,KAAI,SAAAC,GACH,MAAO,8CAG0BC,OADED,EAAGE,GAAG,6CACeD,OAAvBD,EAAGG,YAAY,UACnBF,OAD2BD,EAAGI,eAAe,wCAE/CH,OADED,EAAGK,MAAM,0CAENJ,OADLD,EAAGM,UAAU,0CACQL,OAAhBD,EAAGO,aAAa,qCAIjDC,KAAK,IA/CVf,SAASgB,KAAKC,mBAAmB,eAAe,EAAAC,EAAAC,kBAChDjB,EAAYkB,oBAAoBC,MAAK,SAAAC,IAEnC,EAAAC,EAAAC,YAAWF,EAAOG,MACfJ,MAAK,WACJtB,EAAK2B,UAAYtB,EAAOkB,EAAOG,KAAKE,UAEjB,EAAAC,EAAAC,kBAAiB,CAClCC,WAAYR,EAAOG,KAAKM,cACxBC,KAAMV,EAAOG,KAAKO,KAClBC,WAAYX,EAAOG,KAAKS,cAGfC,GAAG,aAAa,SAAAC,GACzB,IAAMC,EAAcD,EAAMJ,KAC1B9B,EAAY8B,KAAOK,EAEnBnC,EACGkB,oBACAC,MAAK,SAAAiB,IACJ,EAAAf,EAAAC,YAAWc,EAAOb,MAAMJ,MAAK,WAC3BtB,EAAK2B,UAAYtB,EAAOkC,EAAOb,KAAKE,eAGvCY,OAAM,SAAAC,GACLC,QAAQC,IAAIF,YAInBG,SAAQ,WACP3C,SAASC,cAAc,oBAAoB2C,e","sources":["src/js/fetch-film.js"],"sourcesContent":["import { UnsplashApi } from './themoviedb';\nimport { createPagination } from './pagination';\nimport { changeData } from './index';\nimport { renderSpinner } from './spiner';\n\nconst containerPagination = document.querySelector('#pagination');\n\nconst gall = document.querySelector('.gallery__list');\n\nconst unsplashApi = new UnsplashApi();\ndocument.body.insertAdjacentHTML('beforebegin', renderSpinner());\nunsplashApi.fetchPopularFilms().then(result => {\n  // document.body.insertAdjacentHTML('beforebegin', renderSpinner());\n  changeData(result.data)\n    .then(() => {\n      gall.innerHTML = markup(result.data.results);\n\n      const pagination = createPagination({\n        totalItems: result.data.total_results,\n        page: result.data.page,\n        totalPages: result.data.total_pages,\n      });\n\n      pagination.on('afterMove', event => {\n        const currentPage = event.page;\n        unsplashApi.page = currentPage;\n\n        unsplashApi\n          .fetchPopularFilms()\n          .then(result => {\n            changeData(result.data).then(() => {\n              gall.innerHTML = markup(result.data.results);\n            });\n          })\n          .catch(error => {\n            console.log(error);\n          });\n      });\n    })\n    .finally(() => {\n      document.querySelector('.backdrop-loader').remove();\n    });\n});\n\nexport function markup(elements) {\n  return elements\n    .map(el => {\n      return `\n\n    <li class=\"gallery__item\" data-id=\"${el.id}\">\n      <img class=\"gallery__img\" src=\"${el.poster_path}\" alt=${el.original_title}>\n      <h3 class=\"gallery__title\">${el.title}</h3>\n      <p class=\"gallery__text\">${el.genre_ids}\n        <span class=\"gallery__year\">${el.release_date}</span>\n      </p>\n    </li>`;\n    })\n    .join('');\n}\n"],"names":["$54vAX","parcelRequire","$353616bd795d8b53$var$gall","document","querySelector","$353616bd795d8b53$var$unsplashApi","UnsplashApi","$353616bd795d8b53$export$7b40ce885114f0a6","elements","map","el","concat","id","poster_path","original_title","title","genre_ids","release_date","join","body","insertAdjacentHTML","$diaKp","renderSpinner","fetchPopularFilms","then","result1","$5TAx9","changeData","data","innerHTML","results","$jcFG7","createPagination","totalItems","total_results","page","totalPages","total_pages","on","event","currentPage","result","catch","error","console","log","finally","remove"],"version":3,"file":"index.5532dd3f.js.map"}