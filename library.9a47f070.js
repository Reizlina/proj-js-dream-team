!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},i=e.parcelRequired7c6;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in n){var i=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,i.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequired7c6=i);var a=i("54vAX"),o=new(0,a.UnsplashApi),l=document.querySelector("#js-module"),r=document.querySelector("[data-modal]"),d=document.querySelector(".gallery__list");var s="watched",c="queue";d.addEventListener("click",(function(e){if("UL"!==e.target.nodeName){document.body.insertAdjacentHTML("beforebegin",'<div class="backdrop-loader"><div class="loader">\n        <div><div></div></div>\n        <div><div></div></div>\n        <div><div></div></div>\n        <div><div></div></div>\n        <div><div></div></div>\n        <div><div></div></div>\n        <div><div></div></div>\n        <div><div></div></div>\n        <div><div></div></div>\n        <div><div></div></div>\n        <div><div></div></div>\n        <div><div></div></div>\n      </div></div>');var t=e.target.closest("[data-id]").getAttribute("data-id");o.infoAboutFilm(t).then((function(e){var t,n=e.data;r.classList.toggle("is-hidden"),l.innerHTML=(null===(t=n).poster_path?t.poster_path="https://thumbs.dreamstime.com/b/%D1%81%D0%BA%D0%BE%D1%80%D0%BE-%D0%BD%D0%B0-%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%BE%D0%B9-%D0%B4%D0%BE%D1%81%D0%BA%D0%B5-%D0%BF%D0%BE%D1%8F%D0%B2%D0%B8%D1%82%D1%81%D1%8F-%D0%BF%D0%BB%D0%B0%D0%BA%D0%B0%D1%82-retro-%D1%81%D0%B2%D0%B5%D1%82%D1%8F%D1%89%D0%B8%D0%B9%D1%81%D1%8F-%D0%BD%D0%B5%D0%BE%D0%BD-159994270.jpg":t.poster_path="https://image.tmdb.org/t/p/w500/"+t.poster_path,t.genre_ids||(t.genre_ids="genre unknown"),'<div class="modal__backcall">\n        <div class="modal__img-box">\n          <img\n            class="modal__img"\n            src='.concat(t.poster_path," alt=").concat(t.original_title,'\n          />\n        </div>\n        <div class="modal__text-content">\n          <h2 class="modal__title">').concat(t.title,'</h2>\n          <div class="modal__dicr">\n            <ul class="modal__list1">\n              <li class="modal__list-item">Vote / Votes</li>\n              <li class="modal__list-item">Popularity</li>\n              <li class="modal__list-item">Original Title</li>\n              <li class="modal__list-item">Genre</li>\n            </ul>\n            <ul class="modal__list2">\n              <li class="modal__item">\n                <span class="modal__vote1">').concat(t.vote_average,'</span> /\n                <span class="modal__vote2">').concat(t.vote_count,'</span>\n              </li>\n              <li class="modal__item">').concat(t.popularity,'</li>\n              <li class="modal__item">').concat(t.title,'</li>\n              <li class="modal__item">').concat(t.genre_ids,'</li>\n            </ul>\n          </div>\n          <article class="modal__article">\n            <h3 class="modal__subtitle">About</h3>\n            <p class="modal__text">\n             ').concat(t.overview,'\n            </p>\n          </article>\n          <div class="modal__btn-box">\n            <button class="modal__button-org" type="button">\n              add to Watched\n            </button>\n            <button class="modal__button-trans" type="button">\n              add to queue\n            </button>\n          </div>\n        </div>\n  </div>'));var i=document.querySelector(".modal__button-org"),a=document.querySelector(".modal__button-trans"),o=null;try{o=null===(o=localStorage.getItem(s))?[]:JSON.parse(o)}catch(e){console.error("Get state error: ",e.message)}function v(){var e=[];localStorage.getItem(s)?localStorage.getItem(s).includes(JSON.stringify(n))?console.log("Watched film list includes this film!"):((e=JSON.parse(localStorage.getItem(s))).push(n),localStorage.setItem(s,JSON.stringify(e)),i.removeEventListener("click",v),i.textContent="remove from watched",i.addEventListener("click",u)):(e.push(n),localStorage.setItem(s,JSON.stringify(e)),i.removeEventListener("click",v),i.textContent="remove from watched",i.addEventListener("click",u))}function u(){var e=JSON.parse(localStorage.getItem(s)),t=e.findIndex((function(e){return e.id===n.id}));e.splice(t,1),localStorage.setItem(s,JSON.stringify(e)),m(e),d.innerHTML=D(e),i.removeEventListener("click",u),i.textContent="add to Watched",i.addEventListener("click",v)}o.find((function(e){return e.id===n.id}))?(i.addEventListener("click",u),i.textContent="remove from watched"):i.addEventListener("click",v);var g=null;try{g=null===(g=localStorage.getItem(c))?[]:JSON.parse(g)}catch(e){console.error("Get state error: ",e.message)}function _(){var e=[];localStorage.getItem(c)?localStorage.getItem(c).includes(JSON.stringify(n))?console.log("queue film list includes this film!"):((e=JSON.parse(localStorage.getItem(c))).push(n),localStorage.setItem(c,JSON.stringify(e)),a.removeEventListener("click",_),a.textContent="remove from queue",a.addEventListener("click",B)):(e.push(n),localStorage.setItem(c,JSON.stringify(e)),a.removeEventListener("click",_),a.textContent="remove from queue",a.addEventListener("click",B))}function B(){var e=JSON.parse(localStorage.getItem(c)),t=e.findIndex((function(e){return e.id===n.id}));e.splice(t,1),localStorage.setItem(c,JSON.stringify(e)),m(e),d.innerHTML=D(e),a.removeEventListener("click",B),a.textContent="add to queue",a.addEventListener("click",_)}g.find((function(e){return e.id===n.id}))?(a.addEventListener("click",B),a.textContent="remove from queue"):a.addEventListener("click",_)})).finally((function(){document.querySelector(".backdrop-loader").remove()}));var n=document.querySelector(".close");n.addEventListener("click",v),window.addEventListener("keydown",a),r.addEventListener("click",i)}function i(e){e.target===e.currentTarget&&v()}function a(e){"Escape"===e.code&&v()}function v(){r.classList.toggle("is-hidden"),n.removeEventListener("click",v),window.removeEventListener("keydown",a),r.removeEventListener("click",i)}function D(e){return e.map((function(e){return'<li class="gallery__item" data-id="'.concat(e.id,'">\n      <img class="gallery__img" src="').concat(e.poster_path,'" alt="movie image" height="455px">\n      <h3 class="gallery__title">').concat(e.original_title,'</h3>\n      <p class="gallery__text">\n         ').concat(e.genres,'\n        <span class="gallery__year">').concat(e.release_date,"</span>\n      </p>\n    </li>")})).join("")}function m(e){var t=localStorage.getItem("genre_ids"),n=JSON.parse(t);return console.log(e),e.forEach((function(e){e.genres.forEach((function(e,t,i){for(var a=0;a<n.length;a+=1)if(e.id===n[a].id){i[t]=n[a].name;break}})),null===e.poster_path?e.poster_path="https://thumbs.dreamstime.com/b/%D1%81%D0%BA%D0%BE%D1%80%D0%BE-%D0%BD%D0%B0-%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%BE%D0%B9-%D0%B4%D0%BE%D1%81%D0%BA%D0%B5-%D0%BF%D0%BE%D1%8F%D0%B2%D0%B8%D1%82%D1%81%D1%8F-%D0%BF%D0%BB%D0%B0%D0%BA%D0%B0%D1%82-retro-%D1%81%D0%B2%D0%B5%D1%82%D1%8F%D1%89%D0%B8%D0%B9%D1%81%D1%8F-%D0%BD%D0%B5%D0%BE%D0%BD-159994270.jpg":e.poster_path="https://image.tmdb.org/t/p/w500/"+e.poster_path,e.release_date?e.release_date=e.release_date.slice(0,4):e.release_date="release year unknown",e.genres.length||(e.genres="genre unknown")}))}}))}();
//# sourceMappingURL=library.9a47f070.js.map
